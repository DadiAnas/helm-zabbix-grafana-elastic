# helm-zabbix-grafana-elastic

This [Helm](https://dadianas.github.io/helm-zabbix-grafana-elastic) chart installs the stack [Zabbix](https://www.zabbix.com), [grafana](https://grafana.com/), [kibana, elasticsearch](https://www.elastic.co/) and [fluent-bit](https://fluentbit.io/) in a Kubernetes cluster.

## Prerequisites

In order to install all the charts: Zabbix, grafana and EFK stack (ElasticSearch/Fluent-bit/Kibana) on kubernetes, you must have a well configured kubernetes cluster.

In my case I am using a Kubernetes cluster that runing on Virtual Machines with VMware Photon Os in a VMware ESXI Server. If you need to install configure your own cluster using VMs with photon OS, you should have a look to git repo directory kubeadm you must find two scripts to install kubeadm on master node and other for workers.

The second thins that you need is helm, the package manager for kubernetes, installed on the master node, take a look in helm website for that.

To sum it up:

- Kubernetes cluster 1.10+
- Helm 3.0+
- Persistent Volume provisioner support in the underlying infrastructure.

## Configure the chart

The items of section [Grafana configuration](#Grafana_Configuration), [Zabbix Configuration](#Zabbix_Configuration), [Kibana Configuration](#Kibana_Configuration) and [ElasticSearch Configuration](#ElasticSearch_Configuration) can be set via `--set` flag during installation or just change the values according to the need of the environment in `helm-zabbix-grafana-elastic/values.yaml` file.

## Installation

If your environement match well the requirements, you can now easily deploy the charts.

Access your kubernetes cluster.

Create namespace `monitoring` in Kubernetes cluster.

    kubectl create namespace monitoring

Add Helm repo:

    helm repo add dadianas https://dadianas.github.io/helm-zabbix-grafana-elastic

Update the list helm chart. This is recommend before install/upgrade a helm chart:

    helm repo update

Export default values of chart `helm-zabbix-grafana-elastic` to `$HOME/zeg_values.yaml`:

    helm show values dadianas/zabbix-grafana-elastic > $HOME/zeg_values.yaml

Change the values according to the environment in the file `$HOME/zeg_values.yaml`.

Install the Zabbix helm chart with a release name `zeg` (zeg is the abriviation of zabbix-elastic-grafana):

    helm install zabbix dadianas/zabbix-grafana-elastic --dependency-update -f $HOME/zabbix_values.yaml -n monitoring

This chart create a PV volumes that will be deleted after uninstallation.

To make a persistent one you have to remove `storage0` and `storage1` from `$Home/zeg_values.yaml` and create your own PV after installing the chart.

**_ Go to [Grafana configuration](#Grafana_Configuration), [Zabbix Configuration](#Zabbix_Configuration), [Kibana Configuration](#Kibana_Configuration), [ElasticSearch Configuration](#ElasticSearch_Configuration). _**

# Grafana_Configuration

The following tables lists the configurable parameters of the grafana chart and their default values.

| Parameter                                                       | Description                                                                                                                                                                                                                                                                                      | Default                                                                                                                          |
| --------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------- |
| `grafana.replicas`                                              | Number of nodes                                                                                                                                                                                                                                                                                  | `1`                                                                                                                              |
| `grafana.podDisruptionBudget.minAvailable`                      | Pod disruption minimum available                                                                                                                                                                                                                                                                 | `nil`                                                                                                                            |
| `grafana.podDisruptionBudget.maxUnavailable`                    | Pod disruption maximum unavailable                                                                                                                                                                                                                                                               | `nil`                                                                                                                            |
| `grafana.deploymentStrategy`                                    | Deployment strategy                                                                                                                                                                                                                                                                              | `{ "type": "RollingUpdate" }`                                                                                                    |
| `grafana.livenessProbe`                                         | Liveness Probe settings                                                                                                                                                                                                                                                                          | `{ "httpGet": { "path": "/api/health", "port": 3000 } "initialDelaySeconds": 60, "timeoutSeconds": 30, "failureThreshold": 10 }` |
| `grafana.readinessProbe`                                        | Readiness Probe settings                                                                                                                                                                                                                                                                         | `{ "httpGet": { "path": "/api/health", "port": 3000 } }`                                                                         |
| `grafana.securityContext`                                       | Deployment securityContext                                                                                                                                                                                                                                                                       | `{"runAsUser": 472, "runAsGroup": 472, "fsGroup": 472}`                                                                          |
| `grafana.priorityClassName`                                     | Name of Priority Class to assign pods                                                                                                                                                                                                                                                            | `nil`                                                                                                                            |
| `grafana.image.repository`                                      | Image repository                                                                                                                                                                                                                                                                                 | `grafana/grafana`                                                                                                                |
| `grafana.image.tag`                                             | Image tag (`Must be >= 5.0.0`)                                                                                                                                                                                                                                                                   | `7.4.5`                                                                                                                          |
| `grafana.image.sha`                                             | Image sha (optional)                                                                                                                                                                                                                                                                             | `2b56f6106ddc376bb46d974230d530754bf65a640dfbc5245191d72d3b49efc6`                                                               |
| `grafana.image.pullPolicy`                                      | Image pull policy                                                                                                                                                                                                                                                                                | `IfNotPresent`                                                                                                                   |
| `grafana.image.pullSecrets`                                     | Image pull secrets                                                                                                                                                                                                                                                                               | `{}`                                                                                                                             |
| `grafana.service.enabled`                                       | Enable grafana service                                                                                                                                                                                                                                                                           | `true`                                                                                                                           |
| `grafana.service.type`                                          | Kubernetes service type                                                                                                                                                                                                                                                                          | `ClusterIP`                                                                                                                      |
| `grafana.service.port`                                          | Kubernetes port where service is exposed                                                                                                                                                                                                                                                         | `80`                                                                                                                             |
| `grafana.service.portName`                                      | Name of the port on the service                                                                                                                                                                                                                                                                  | `service`                                                                                                                        |
| `grafana.service.targetPort`                                    | Internal service is port                                                                                                                                                                                                                                                                         | `3000`                                                                                                                           |
| `grafana.service.nodePort`                                      | Kubernetes service nodePort                                                                                                                                                                                                                                                                      | `nil`                                                                                                                            |
| `grafana.service.annotations`                                   | Service annotations                                                                                                                                                                                                                                                                              | `{}`                                                                                                                             |
| `grafana.service.labels`                                        | Custom labels                                                                                                                                                                                                                                                                                    | `{}`                                                                                                                             |
| `grafana.service.clusterIP`                                     | internal cluster service IP                                                                                                                                                                                                                                                                      | `nil`                                                                                                                            |
| `grafana.service.loadBalancerIP`                                | IP address to assign to load balancer (if supported)                                                                                                                                                                                                                                             | `nil`                                                                                                                            |
| `grafana.service.loadBalancerSourceRanges`                      | list of IP CIDRs allowed access to lb (if supported)                                                                                                                                                                                                                                             | `[]`                                                                                                                             |
| `grafana.service.externalIPs`                                   | service external IP addresses                                                                                                                                                                                                                                                                    | `[]`                                                                                                                             |
| `grafana.extraExposePorts`                                      | Additional service ports for sidecar containers                                                                                                                                                                                                                                                  | `[]`                                                                                                                             |
| `grafana.hostAliases`                                           | adds rules to the pod's /etc/hosts                                                                                                                                                                                                                                                               | `[]`                                                                                                                             |
| `grafana.ingress.enabled`                                       | Enables Ingress                                                                                                                                                                                                                                                                                  | `false`                                                                                                                          |
| `grafana.ingress.annotations`                                   | Ingress annotations (values are templated)                                                                                                                                                                                                                                                       | `{}`                                                                                                                             |
| `grafana.ingress.labels`                                        | Custom labels                                                                                                                                                                                                                                                                                    | `{}`                                                                                                                             |
| `grafana.ingress.path`                                          | Ingress accepted path                                                                                                                                                                                                                                                                            | `/`                                                                                                                              |
| `grafana.ingress.pathType`                                      | Ingress type of path                                                                                                                                                                                                                                                                             | `Prefix`                                                                                                                         |
| `grafana.ingress.hosts`                                         | Ingress accepted hostnames                                                                                                                                                                                                                                                                       | `["chart-example.local"]`                                                                                                        |
| `grafana.ingress.extraPaths`                                    | Ingress extra paths to prepend to every host configuration. Useful when configuring [custom actions with AWS ALB Ingress Controller](https://kubernetes-sigs.github.io/aws-alb-ingress-controller/guide/ingress/annotation/#actions). Requires `ingress.hosts` to have one or more host entries. | `[]`                                                                                                                             |
| `grafana.ingress.tls`                                           | Ingress TLS configuration                                                                                                                                                                                                                                                                        | `[]`                                                                                                                             |
| `grafana.resources`                                             | CPU/Memory resource requests/limits                                                                                                                                                                                                                                                              | `{}`                                                                                                                             |
| `grafana.nodeSelector`                                          | Node labels for pod assignment                                                                                                                                                                                                                                                                   | `{}`                                                                                                                             |
| `grafana.tolerations`                                           | Toleration labels for pod assignment                                                                                                                                                                                                                                                             | `[]`                                                                                                                             |
| `grafana.affinity`                                              | Affinity settings for pod assignment                                                                                                                                                                                                                                                             | `{}`                                                                                                                             |
| `grafana.extraInitContainers`                                   | Init containers to add to the grafana pod                                                                                                                                                                                                                                                        | `{}`                                                                                                                             |
| `grafana.extraContainers`                                       | Sidecar containers to add to the grafana pod                                                                                                                                                                                                                                                     | `{}`                                                                                                                             |
| `grafana.extraContainerVolumes`                                 | Volumes that can be mounted in sidecar containers                                                                                                                                                                                                                                                | `[]`                                                                                                                             |
| `grafana.extraLabels`                                           | Custom labels for all manifests                                                                                                                                                                                                                                                                  | `{}`                                                                                                                             |
| `grafana.schedulerName`                                         | Name of the k8s scheduler (other than default)                                                                                                                                                                                                                                                   | `nil`                                                                                                                            |
| `grafana.persistence.enabled`                                   | Use persistent volume to store data                                                                                                                                                                                                                                                              | `false`                                                                                                                          |
| `grafana.persistence.type`                                      | Type of persistence (`pvc` or `statefulset`)                                                                                                                                                                                                                                                     | `pvc`                                                                                                                            |
| `grafana.persistence.size`                                      | Size of persistent volume claim                                                                                                                                                                                                                                                                  | `10Gi`                                                                                                                           |
| `grafana.persistence.existingClaim`                             | Use an existing PVC to persist data                                                                                                                                                                                                                                                              | `nil`                                                                                                                            |
| `grafana.persistence.storageClassName`                          | Type of persistent volume claim                                                                                                                                                                                                                                                                  | `nil`                                                                                                                            |
| `grafana.persistence.accessModes`                               | Persistence access modes                                                                                                                                                                                                                                                                         | `[ReadWriteOnce]`                                                                                                                |
| `grafana.persistence.annotations`                               | PersistentVolumeClaim annotations                                                                                                                                                                                                                                                                | `{}`                                                                                                                             |
| `grafana.persistence.finalizers`                                | PersistentVolumeClaim finalizers                                                                                                                                                                                                                                                                 | `[ "kubernetes.io/pvc-protection" ]`                                                                                             |
| `grafana.persistence.subPath`                                   | Mount a sub dir of the persistent volume                                                                                                                                                                                                                                                         | `nil`                                                                                                                            |
| `grafana.persistence.inMemory.enabled`                          | If persistence is not enabled, whether to mount the local storage in-memory to improve performance                                                                                                                                                                                               | `false`                                                                                                                          |
| `grafana.persistence.inMemory.sizeLimit`                        | SizeLimit for the in-memory local storage                                                                                                                                                                                                                                                        | `nil`                                                                                                                            |
| `grafana.initChownData.enabled`                                 | If false, don't reset data ownership at startup                                                                                                                                                                                                                                                  | true                                                                                                                             |
| `grafana.initChownData.image.repository`                        | init-chown-data container image repository                                                                                                                                                                                                                                                       | `busybox`                                                                                                                        |
| `grafana.initChownData.image.tag`                               | init-chown-data container image tag                                                                                                                                                                                                                                                              | `1.31.1`                                                                                                                         |
| `grafana.initChownData.image.sha`                               | init-chown-data container image sha (optional)                                                                                                                                                                                                                                                   | `""`                                                                                                                             |
| `grafana.initChownData.image.pullPolicy`                        | init-chown-data container image pull policy                                                                                                                                                                                                                                                      | `IfNotPresent`                                                                                                                   |
| `grafana.initChownData.resources`                               | init-chown-data pod resource requests & limits                                                                                                                                                                                                                                                   | `{}`                                                                                                                             |
| `grafana.schedulerName`                                         | Alternate scheduler name                                                                                                                                                                                                                                                                         | `nil`                                                                                                                            |
| `grafana.env`                                                   | Extra environment variables passed to pods                                                                                                                                                                                                                                                       | `{}`                                                                                                                             |
| `grafana.envValueFrom`                                          | Environment variables from alternate sources. See the API docs on [EnvVarSource](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.17/#envvarsource-v1-core) for format details.                                                                                                  | `{}`                                                                                                                             |
| `grafana.envFromSecret`                                         | Name of a Kubernetes secret (must be manually created in the same namespace) containing values to be added to the environment. Can be templated                                                                                                                                                  | `""`                                                                                                                             |
| `grafana.envRenderSecret`                                       | Sensible environment variables passed to pods and stored as secret                                                                                                                                                                                                                               | `{}`                                                                                                                             |
| `grafana.extraSecretMounts`                                     | Additional grafana server secret mounts                                                                                                                                                                                                                                                          | `[]`                                                                                                                             |
| `grafana.extraVolumeMounts`                                     | Additional grafana server volume mounts                                                                                                                                                                                                                                                          | `[]`                                                                                                                             |
| `grafana.extraConfigmapMounts`                                  | Additional grafana server configMap volume mounts                                                                                                                                                                                                                                                | `[]`                                                                                                                             |
| `grafana.extraEmptyDirMounts`                                   | Additional grafana server emptyDir volume mounts                                                                                                                                                                                                                                                 | `[]`                                                                                                                             |
| `grafana.plugins`                                               | Plugins to be loaded along with Grafana                                                                                                                                                                                                                                                          | `[]`                                                                                                                             |
| `grafana.datasources`                                           | Configure grafana datasources (passed through tpl)                                                                                                                                                                                                                                               | `{}`                                                                                                                             |
| `grafana.notifiers`                                             | Configure grafana notifiers                                                                                                                                                                                                                                                                      | `{}`                                                                                                                             |
| `grafana.dashboardProviders`                                    | Configure grafana dashboard providers                                                                                                                                                                                                                                                            | `{}`                                                                                                                             |
| `grafana.dashboards`                                            | Dashboards to import                                                                                                                                                                                                                                                                             | `{}`                                                                                                                             |
| `grafana.dashboardsConfigMaps`                                  | ConfigMaps reference that contains dashboards                                                                                                                                                                                                                                                    | `{}`                                                                                                                             |
| `grafana.grafana.ini`                                           | Grafana's primary configuration                                                                                                                                                                                                                                                                  | `{}`                                                                                                                             |
| `grafana.ldap.enabled`                                          | Enable LDAP authentication                                                                                                                                                                                                                                                                       | `false`                                                                                                                          |
| `grafana.ldap.existingSecret`                                   | The name of an existing secret containing the `ldap.toml` file, this must have the key `ldap-toml`.                                                                                                                                                                                              | `""`                                                                                                                             |
| `grafana.ldap.config`                                           | Grafana's LDAP configuration                                                                                                                                                                                                                                                                     | `""`                                                                                                                             |
| `grafana.annotations`                                           | Deployment annotations                                                                                                                                                                                                                                                                           | `{}`                                                                                                                             |
| `grafana.labels`                                                | Deployment labels                                                                                                                                                                                                                                                                                | `{}`                                                                                                                             |
| `grafana.podAnnotations`                                        | Pod annotations                                                                                                                                                                                                                                                                                  | `{}`                                                                                                                             |
| `grafana.podLabels`                                             | Pod labels                                                                                                                                                                                                                                                                                       | `{}`                                                                                                                             |
| `grafana.podPortName`                                           | Name of the grafana port on the pod                                                                                                                                                                                                                                                              | `grafana`                                                                                                                        |
| `grafana.sidecar.image.repository`                              | Sidecar image repository                                                                                                                                                                                                                                                                         | `quay.io/kiwigrid/k8s-sidecar`                                                                                                   |
| `grafana.sidecar.image.tag`                                     | Sidecar image tag                                                                                                                                                                                                                                                                                | `1.10.7`                                                                                                                         |
| `grafana.sidecar.image.sha`                                     | Sidecar image sha (optional)                                                                                                                                                                                                                                                                     | `""`                                                                                                                             |
| `grafana.sidecar.imagePullPolicy`                               | Sidecar image pull policy                                                                                                                                                                                                                                                                        | `IfNotPresent`                                                                                                                   |
| `grafana.sidecar.resources`                                     | Sidecar resources                                                                                                                                                                                                                                                                                | `{}`                                                                                                                             |
| `grafana.sidecar.enableUniqueFilenames`                         | Sets the kiwigrid/k8s-sidecar UNIQUE_FILENAMES environment variable                                                                                                                                                                                                                              | `false`                                                                                                                          |
| `grafana.sidecar.dashboards.enabled`                            | Enables the cluster wide search for dashboards and adds/updates/deletes them in grafana                                                                                                                                                                                                          | `false`                                                                                                                          |
| `grafana.sidecar.dashboards.SCProvider`                         | Enables creation of sidecar provider                                                                                                                                                                                                                                                             | `true`                                                                                                                           |
| `grafana.sidecar.dashboards.provider.name`                      | Unique name of the grafana provider                                                                                                                                                                                                                                                              | `sidecarProvider`                                                                                                                |
| `grafana.sidecar.dashboards.provider.orgid`                     | Id of the organisation, to which the dashboards should be added                                                                                                                                                                                                                                  | `1`                                                                                                                              |
| `grafana.sidecar.dashboards.provider.folder`                    | Logical folder in which grafana groups dashboards                                                                                                                                                                                                                                                | `""`                                                                                                                             |
| `grafana.sidecar.dashboards.provider.disableDelete`             | Activate to avoid the deletion of imported dashboards                                                                                                                                                                                                                                            | `false`                                                                                                                          |
| `grafana.sidecar.dashboards.provider.allowUiUpdates`            | Allow updating provisioned dashboards from the UI                                                                                                                                                                                                                                                | `false`                                                                                                                          |
| `grafana.sidecar.dashboards.provider.type`                      | Provider type                                                                                                                                                                                                                                                                                    | `file`                                                                                                                           |
| `grafana.sidecar.dashboards.provider.foldersFromFilesStructure` | Allow Grafana to replicate dashboard structure from filesystem.                                                                                                                                                                                                                                  | `false`                                                                                                                          |
| `grafana.sidecar.dashboards.watchMethod`                        | Method to use to detect ConfigMap changes. With WATCH the sidecar will do a WATCH requests, with SLEEP it will list all ConfigMaps, then sleep for 60 seconds.                                                                                                                                   | `WATCH`                                                                                                                          |
| `grafana.sidecar.skipTlsVerify`                                 | Set to true to skip tls verification for kube api calls                                                                                                                                                                                                                                          | `nil`                                                                                                                            |
| `grafana.sidecar.dashboards.label`                              | Label that config maps with dashboards should have to be added                                                                                                                                                                                                                                   | `grafana_dashboard`                                                                                                              |
| `grafana.sidecar.dashboards.labelValue`                         | Label value that config maps with dashboards should have to be added                                                                                                                                                                                                                             | `nil`                                                                                                                            |
| `grafana.sidecar.dashboards.folder`                             | Folder in the pod that should hold the collected dashboards (unless `sidecar.dashboards.defaultFolderName` is set). This path will be mounted.                                                                                                                                                   | `/tmp/dashboards`                                                                                                                |
| `grafana.sidecar.dashboards.folderAnnotation`                   | The annotation the sidecar will look for in configmaps to override the destination folder for files                                                                                                                                                                                              | `nil`                                                                                                                            |
| `grafana.sidecar.dashboards.defaultFolderName`                  | The default folder name, it will create a subfolder under the `sidecar.dashboards.folder` and put dashboards in there instead                                                                                                                                                                    | `nil`                                                                                                                            |
| `grafana.sidecar.dashboards.searchNamespace`                    | If specified, the sidecar will search for dashboard config-maps inside this namespace. Otherwise the namespace in which the sidecar is running will be used. It's also possible to specify ALL to search in all namespaces                                                                       | `nil`                                                                                                                            |
| `grafana.sidecar.dashboards.resource`                           | Should the sidecar looks into secrets, configmaps or both.                                                                                                                                                                                                                                       | `both`                                                                                                                           |
| `grafana.sidecar.datasources.enabled`                           | Enables the cluster wide search for datasources and adds/updates/deletes them in grafana                                                                                                                                                                                                         | `false`                                                                                                                          |
| `grafana.sidecar.datasources.label`                             | Label that config maps with datasources should have to be added                                                                                                                                                                                                                                  | `grafana_datasource`                                                                                                             |
| `grafana.sidecar.datasources.labelValue`                        | Label value that config maps with datasources should have to be added                                                                                                                                                                                                                            | `nil`                                                                                                                            |
| `grafana.sidecar.datasources.searchNamespace`                   | If specified, the sidecar will search for datasources config-maps inside this namespace. Otherwise the namespace in which the sidecar is running will be used. It's also possible to specify ALL to search in all namespaces                                                                     | `nil`                                                                                                                            |
| `grafana.sidecar.datasources.resource`                          | Should the sidecar looks into secrets, configmaps or both.                                                                                                                                                                                                                                       | `both`                                                                                                                           |
| `grafana.sidecar.notifiers.enabled`                             | Enables the cluster wide search for notifiers and adds/updates/deletes them in grafana                                                                                                                                                                                                           | `false`                                                                                                                          |
| `grafana.sidecar.notifiers.label`                               | Label that config maps with notifiers should have to be added                                                                                                                                                                                                                                    | `grafana_notifier`                                                                                                               |
| `grafana.sidecar.notifiers.searchNamespace`                     | If specified, the sidecar will search for notifiers config-maps (or secrets) inside this namespace. Otherwise the namespace in which the sidecar is running will be used. It's also possible to specify ALL to search in all namespaces                                                          | `nil`                                                                                                                            |
| `grafana.sidecar.notifiers.resource`                            | Should the sidecar looks into secrets, configmaps or both.                                                                                                                                                                                                                                       | `both`                                                                                                                           |
| `grafana.smtp.existingSecret`                                   | The name of an existing secret containing the SMTP credentials.                                                                                                                                                                                                                                  | `""`                                                                                                                             |
| `grafana.smtp.userKey`                                          | The key in the existing SMTP secret containing the username.                                                                                                                                                                                                                                     | `"user"`                                                                                                                         |
| `grafana.smtp.passwordKey`                                      | The key in the existing SMTP secret containing the password.                                                                                                                                                                                                                                     | `"password"`                                                                                                                     |
| `grafana.admin.existingSecret`                                  | The name of an existing secret containing the admin credentials.                                                                                                                                                                                                                                 | `""`                                                                                                                             |
| `grafana.admin.userKey`                                         | The key in the existing admin secret containing the username.                                                                                                                                                                                                                                    | `"admin-user"`                                                                                                                   |
| `grafana.admin.passwordKey`                                     | The key in the existing admin secret containing the password.                                                                                                                                                                                                                                    | `"admin-password"`                                                                                                               |
| `grafana.serviceAccount.annotations`                            | ServiceAccount annotations                                                                                                                                                                                                                                                                       |                                                                                                                                  |
| `grafana.serviceAccount.create`                                 | Create service account                                                                                                                                                                                                                                                                           | `true`                                                                                                                           |
| `grafana.serviceAccount.name`                                   | Service account name to use, when empty will be set to created account if `serviceAccount.create` is set else to `default`                                                                                                                                                                       | ``                                                                                                                               |
| `grafana.serviceAccount.nameTest`                               | Service account name to use for test, when empty will be set to created account if `serviceAccount.create` is set else to `default`                                                                                                                                                              | `nil`                                                                                                                            |
| `grafana.rbac.create`                                           | Create and use RBAC resources                                                                                                                                                                                                                                                                    | `true`                                                                                                                           |
| `grafana.rbac.namespaced`                                       | Creates Role and Rolebinding instead of the default ClusterRole and ClusteRoleBindings for the grafana instance                                                                                                                                                                                  | `false`                                                                                                                          |
| `grafana.rbac.useExistingRole`                                  | Set to a rolename to use existing role - skipping role creating - but still doing serviceaccount and rolebinding to the rolename set here.                                                                                                                                                       | `nil`                                                                                                                            |
| `grafana.rbac.pspEnabled`                                       | Create PodSecurityPolicy (with `rbac.create`, grant roles permissions as well)                                                                                                                                                                                                                   | `true`                                                                                                                           |
| `grafana.rbac.pspUseAppArmor`                                   | Enforce AppArmor in created PodSecurityPolicy (requires `rbac.pspEnabled`)                                                                                                                                                                                                                       | `true`                                                                                                                           |
| `grafana.rbac.extraRoleRules`                                   | Additional rules to add to the Role                                                                                                                                                                                                                                                              | []                                                                                                                               |
| `grafana.rbac.extraClusterRoleRules`                            | Additional rules to add to the ClusterRole                                                                                                                                                                                                                                                       | []                                                                                                                               |
| `grafana.command`                                               | Define command to be executed by grafana container at startup                                                                                                                                                                                                                                    | `nil`                                                                                                                            |
| `grafana.testFramework.enabled`                                 | Whether to create test-related resources                                                                                                                                                                                                                                                         | `true`                                                                                                                           |
| `grafana.testFramework.image`                                   | `test-framework` image repository.                                                                                                                                                                                                                                                               | `bats/bats`                                                                                                                      |
| `grafana.testFramework.tag`                                     | `test-framework` image tag.                                                                                                                                                                                                                                                                      | `v1.1.0`                                                                                                                         |
| `grafana.testFramework.imagePullPolicy`                         | `test-framework` image pull policy.                                                                                                                                                                                                                                                              | `IfNotPresent`                                                                                                                   |
| `grafana.testFramework.securityContext`                         | `test-framework` securityContext                                                                                                                                                                                                                                                                 | `{}`                                                                                                                             |
| `grafana.downloadDashboards.env`                                | Environment variables to be passed to the `download-dashboards` container                                                                                                                                                                                                                        | `{}`                                                                                                                             |
| `grafana.downloadDashboards.envFromSecret`                      | Name of a Kubernetes secret (must be manually created in the same namespace) containing values to be added to the environment. Can be templated                                                                                                                                                  | `""`                                                                                                                             |
| `grafana.downloadDashboards.resources`                          | Resources of `download-dashboards` container                                                                                                                                                                                                                                                     | `{}`                                                                                                                             |
| `grafana.downloadDashboardsImage.repository`                    | Curl docker image repo                                                                                                                                                                                                                                                                           | `curlimages/curl`                                                                                                                |
| `grafana.downloadDashboardsImage.tag`                           | Curl docker image tag                                                                                                                                                                                                                                                                            | `7.73.0`                                                                                                                         |
| `grafana.downloadDashboardsImage.sha`                           | Curl docker image sha (optional)                                                                                                                                                                                                                                                                 | `""`                                                                                                                             |
| `grafana.downloadDashboardsImage.pullPolicy`                    | Curl docker image pull policy                                                                                                                                                                                                                                                                    | `IfNotPresent`                                                                                                                   |
| `grafana.namespaceOverride`                                     | Override the deployment namespace                                                                                                                                                                                                                                                                | `""` (`Release.Namespace`)                                                                                                       |
| `grafana.serviceMonitor.enabled`                                | Use servicemonitor from prometheus operator                                                                                                                                                                                                                                                      | `false`                                                                                                                          |
| `grafana.serviceMonitor.namespace`                              | Namespace this servicemonitor is installed in                                                                                                                                                                                                                                                    |                                                                                                                                  |
| `grafana.serviceMonitor.interval`                               | How frequently Prometheus should scrape                                                                                                                                                                                                                                                          | `1m`                                                                                                                             |
| `grafana.serviceMonitor.path`                                   | Path to scrape                                                                                                                                                                                                                                                                                   | `/metrics`                                                                                                                       |
| `grafana.serviceMonitor.scheme`                                 | Scheme to use for metrics scraping                                                                                                                                                                                                                                                               | `http`                                                                                                                           |
| `grafana.serviceMonitor.tlsConfig`                              | TLS configuration block for the endpoint                                                                                                                                                                                                                                                         | `{}`                                                                                                                             |
| `grafana.serviceMonitor.labels`                                 | Labels for the servicemonitor passed to Prometheus Operator                                                                                                                                                                                                                                      | `{}`                                                                                                                             |
| `grafana.serviceMonitor.scrapeTimeout`                          | Timeout after which the scrape is ended                                                                                                                                                                                                                                                          | `30s`                                                                                                                            |
| `grafana.serviceMonitor.relabelings`                            | MetricRelabelConfigs to apply to samples before ingestion.                                                                                                                                                                                                                                       | `[]`                                                                                                                             |
| `grafana.revisionHistoryLimit`                                  | Number of old ReplicaSets to retain                                                                                                                                                                                                                                                              | `10`                                                                                                                             |
| `grafana.imageRenderer.enabled`                                 | Enable the image-renderer deployment & service                                                                                                                                                                                                                                                   | `false`                                                                                                                          |
| `grafana.imageRenderer.image.repository`                        | image-renderer Image repository                                                                                                                                                                                                                                                                  | `grafana/grafana-image-renderer`                                                                                                 |
| `grafana.imageRenderer.image.tag`                               | image-renderer Image tag                                                                                                                                                                                                                                                                         | `latest`                                                                                                                         |
| `grafana.imageRenderer.image.sha`                               | image-renderer Image sha (optional)                                                                                                                                                                                                                                                              | `""`                                                                                                                             |
| `grafana.imageRenderer.image.pullPolicy`                        | image-renderer ImagePullPolicy                                                                                                                                                                                                                                                                   | `Always`                                                                                                                         |
| `grafana.imageRenderer.env`                                     | extra env-vars for image-renderer                                                                                                                                                                                                                                                                | `{}`                                                                                                                             |
| `grafana.imageRenderer.serviceAccountName`                      | image-renderer deployment serviceAccountName                                                                                                                                                                                                                                                     | `""`                                                                                                                             |
| `grafana.imageRenderer.securityContext`                         | image-renderer deployment securityContext                                                                                                                                                                                                                                                        | `{}`                                                                                                                             |
| `grafana.imageRenderer.hostAliases`                             | image-renderer deployment Host Aliases                                                                                                                                                                                                                                                           | `[]`                                                                                                                             |
| `grafana.imageRenderer.priorityClassName`                       | image-renderer deployment priority class                                                                                                                                                                                                                                                         | `''`                                                                                                                             |
| `grafana.imageRenderer.service.enabled`                         | Enable the image-renderer service                                                                                                                                                                                                                                                                | `true`                                                                                                                           |
| `grafana.imageRenderer.service.portName`                        | image-renderer service port name                                                                                                                                                                                                                                                                 | `'http'`                                                                                                                         |
| `grafana.imageRenderer.service.port`                            | image-renderer service port used by both service and deployment                                                                                                                                                                                                                                  | `8081`                                                                                                                           |
| `grafana.imageRenderer.grafanaSubPath`                          | Grafana sub path to use for image renderer callback url                                                                                                                                                                                                                                          | `''`                                                                                                                             |
| `grafana.imageRenderer.podPortName`                             | name of the image-renderer port on the pod                                                                                                                                                                                                                                                       | `http`                                                                                                                           |
| `grafana.imageRenderer.revisionHistoryLimit`                    | number of image-renderer replica sets to keep                                                                                                                                                                                                                                                    | `10`                                                                                                                             |
| `grafana.imageRenderer.networkPolicy.limitIngress`              | Enable a NetworkPolicy to limit inbound traffic from only the created grafana pods                                                                                                                                                                                                               | `true`                                                                                                                           |
| `grafana.imageRenderer.networkPolicy.limitEgress`               | Enable a NetworkPolicy to limit outbound traffic to only the created grafana pods                                                                                                                                                                                                                | `false`                                                                                                                          |
| `grafana.imageRenderer.resources`                               | Set resource limits for image-renderer pdos                                                                                                                                                                                                                                                      | `{}`                                                                                                                             |

    `




                            End of section




    `

**_ Go to [Grafana configuration](#Grafana_Configuration), [Zabbix Configuration](#Zabbix_Configuration), [Kibana Configuration](#Kibana_Configuration), [ElasticSearch Configuration](#ElasticSearch_Configuration). _**

# Zabbix_Configuration

The following tables lists the configurable parameters of the zabbix chart and their default values.

| Key                                          | Type   | Default                            | Description                                                                                                                                                                                                                                                                                                                                               |
| -------------------------------------------- | ------ | ---------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| zabbix.affinity                              | object | `{}`                               | Affinity configurations                                                                                                                                                                                                                                                                                                                                   |
| zabbix.ingress.annotations                   | object | `{}`                               | Ingress annotations                                                                                                                                                                                                                                                                                                                                       |
| zabbix.ingress.enabled                       | bool   | `false`                            | Enables Ingress                                                                                                                                                                                                                                                                                                                                           |
| zabbix.ingress.hosts                         | list   | `[{"host":null,"paths":[]}]`       | Ingress hosts                                                                                                                                                                                                                                                                                                                                             |
| zabbix.ingress.tls                           | list   | `[]`                               | Ingress TLS configuration                                                                                                                                                                                                                                                                                                                                 |
| zabbix.livenessProbe.failureThreshold        | int    | `6`                                | When a probe fails, Kubernetes will try failureThreshold times before giving up. Giving up in case of liveness probe means restarting the container. In case of readiness probe the Pod will be marked Unready                                                                                                                                            |
| zabbix.livenessProbe.initialDelaySeconds     | int    | `30`                               | Number of seconds after the container has started before liveness                                                                                                                                                                                                                                                                                         |
| zabbix.livenessProbe.path                    | string | `"/"`                              | Path of health check of application                                                                                                                                                                                                                                                                                                                       |
| zabbix.livenessProbe.periodSeconds           | int    | `10`                               | Specifies that the kubelet should perform a liveness probe every N seconds                                                                                                                                                                                                                                                                                |
| zabbix.livenessProbe.successThreshold        | int    | `1`                                | Minimum consecutive successes for the probe to be considered successful after having failed                                                                                                                                                                                                                                                               |
| zabbix.livenessProbe.timeoutSeconds          | int    | `5`                                | Number of seconds after which the probe times out                                                                                                                                                                                                                                                                                                         |
| zabbix.nodeSelector                          | object | `{}`                               | nodeSelector configurations                                                                                                                                                                                                                                                                                                                               |
| zabbix.postgresql.enabled                    | bool   | `true`                             | Create a database using Postgresql                                                                                                                                                                                                                                                                                                                        |
| zabbix.postgresql.postgresqlDatabase         | string | `"zabbix"`                         | Name of database                                                                                                                                                                                                                                                                                                                                          |
| zabbix.postgresql.postgresqlPassword         | string | `"zabbix_pwd"`                     | Password of database                                                                                                                                                                                                                                                                                                                                      |
| zabbix.postgresql.postgresqlPostgresPassword | string | `"zabbix_pwd"`                     | Password of`postgres` user in Postgresql                                                                                                                                                                                                                                                                                                                  |
| zabbix.postgresql.postgresqlUsername         | string | `"zabbix"`                         | User of database                                                                                                                                                                                                                                                                                                                                          |
| zabbix.readinessProbe.failureThreshold       | int    | `6`                                | When a probe fails, Kubernetes will try failureThreshold times before giving up. Giving up in case of liveness probe means restarting the container. In case of readiness probe the Pod will be marked Unready                                                                                                                                            |
| zabbix.readinessProbe.initialDelaySeconds    | int    | `5`                                | Number of seconds after the container has started before readiness                                                                                                                                                                                                                                                                                        |
| zabbix.readinessProbe.path                   | string | `"/"`                              | Path of health check of application                                                                                                                                                                                                                                                                                                                       |
| zabbix.readinessProbe.periodSeconds          | int    | `10`                               | Specifies that the kubelet should perform a readiness probe every N seconds                                                                                                                                                                                                                                                                               |
| zabbix.readinessProbe.successThreshold       | int    | `1`                                | Minimum consecutive successes for the probe to be considered successful after having failed                                                                                                                                                                                                                                                               |
| zabbix.readinessProbe.timeoutSeconds         | int    | `5`                                | Number of seconds after which the probe times out                                                                                                                                                                                                                                                                                                         |
| zabbix.resources                             | object | `{}`                               | We usually recommend not to specify default resources and to leave this as a conscious choice for the user. This also increases chances charts run on environments with little resources, such as Minikube. If you do want to specify resources, uncomment the following lines, adjust them as necessary, and remove the curly braces after 'resources:'. |
| tolerations                                  | list   | `[]`                               | Tolerations configurations                                                                                                                                                                                                                                                                                                                                |
| zabbix.zabbixServer.DB_SERVER_HOST           | string | `"zabbix-postgresql"`              | Address of database host                                                                                                                                                                                                                                                                                                                                  |
| zabbix.zabbixServer.POSTGRES_DB              | string | `"zabbix"`                         | Name of database                                                                                                                                                                                                                                                                                                                                          |
| zabbix.zabbixServer.POSTGRES_PASSWORD        | string | `"zabbix_pwd"`                     | Password of database                                                                                                                                                                                                                                                                                                                                      |
| zabbix.zabbixServer.POSTGRES_USER            | string | `"zabbix"`                         | User of database                                                                                                                                                                                                                                                                                                                                          |
| zabbix.zabbixServer.hostIP                   | string | `"0.0.0.0"`                        | optional set hostIP different from 0.0.0.0 to open port only on this IP                                                                                                                                                                                                                                                                                   |
| zabbix.zabbixServer.hostPort                 | bool   | `false`                            | optional set true open a port direct on node where zabbix server runs                                                                                                                                                                                                                                                                                     |
| zabbix.zabbixServer.image.pullPolicy         | string | `"IfNotPresent"`                   | Pull policy of Docker image                                                                                                                                                                                                                                                                                                                               |
| zabbix.zabbixServer.image.pullSecrets        | list   | `[]`                               | List of dockerconfig secrets names to use when pulling images                                                                                                                                                                                                                                                                                             |
| zabbix.zabbixServer.image.repository         | string | `"zabbix/zabbix-server-pgsql"`     | Zabbix server Docker image name                                                                                                                                                                                                                                                                                                                           |
| zabbix.zabbixServer.image.tag                | string | `"ubuntu-5.4.0"`                   | Tag of Docker image of Zabbix server                                                                                                                                                                                                                                                                                                                      |
| zabbix.zabbixServer.replicaCount             | int    | `1`                                | Number of replicas of `zabbixServer` module                                                                                                                                                                                                                                                                                                               |
| zabbix.zabbixServer.service.port             | int    | `10051`                            | Port of service in Kubernetes cluster                                                                                                                                                                                                                                                                                                                     |
| zabbix.zabbixServer.service.type             | string | `"ClusterIP"`                      | Type of service in Kubernetes cluster                                                                                                                                                                                                                                                                                                                     |
| zabbix.zabbixagent.ZBX_ACTIVE_ALLOW          | bool   | `true`                             | This variable is boolean (true or false) and enables or disables feature of active checks                                                                                                                                                                                                                                                                 |
| zabbix.zabbixagent.ZBX_HOSTNAME              | string | `"zabbix-agent"`                   | Zabbix agent hostname Case sensitive hostname                                                                                                                                                                                                                                                                                                             |
| zabbix.zabbixagent.ZBX_JAVAGATEWAY_ENABLE    | bool   | `false`                            | The variable enable communication with Zabbix Java Gateway to collect Java related checks. By default, value is false.                                                                                                                                                                                                                                    |
| zabbix.zabbixagent.ZBX_PASSIVESERVERS        | string | `"127.0.0.1"`                      | The variable is comma separated list of allowed Zabbix server or proxy hosts for connections to Zabbix agent container.                                                                                                                                                                                                                                   |
| zabbix.zabbixagent.ZBX_PASSIVE_ALLOW         | bool   | `true`                             | This variable is boolean (true or false) and enables or disables feature of passive checks. By default, value is true                                                                                                                                                                                                                                     |
| zabbix.zabbixagent.ZBX_SERVER_HOST           | string | `"127.0.0.1"`                      | Zabbix server host                                                                                                                                                                                                                                                                                                                                        |
| zabbix.zabbixagent.ZBX_SERVER_PORT           | int    | `10051`                            | Zabbix server port                                                                                                                                                                                                                                                                                                                                        |
| zabbix.zabbixagent.ZBX_VMWARECACHESIZE       | string | `"128M"`                           | Cache size                                                                                                                                                                                                                                                                                                                                                |
| zabbix.zabbixagent.enabled                   | bool   | `true`                             | Enables use of Zabbix agent                                                                                                                                                                                                                                                                                                                               |
| zabbix.zabbixagent.image.pullPolicy          | string | `"IfNotPresent"`                   | Pull policy of Docker image                                                                                                                                                                                                                                                                                                                               |
| zabbix.zabbixagent.image.pullSecrets         | list   | `[]`                               | List of dockerconfig secrets names to use when pulling images                                                                                                                                                                                                                                                                                             |
| zabbix.zabbixagent.image.repository          | string | `"zabbix/zabbix-agent"`            | Zabbix agent Docker image name                                                                                                                                                                                                                                                                                                                            |
| zabbix.zabbixagent.image.tag                 | string | `"ubuntu-5.4.0"`                   | Tag of Docker image of Zabbix agent                                                                                                                                                                                                                                                                                                                       |
| zabbix.zabbixagent.service.port              | int    | `10050`                            | Port to expose service                                                                                                                                                                                                                                                                                                                                    |
| zabbix.zabbixagent.service.targetPort        | int    | `10050`                            | Port of application pod                                                                                                                                                                                                                                                                                                                                   |
| zabbix.zabbixagent.service.type              | string | `"ClusterIP"`                      | Type of service for Zabbix agent                                                                                                                                                                                                                                                                                                                          |
| zabbix.zabbixproxy.DB_SERVER_HOST            | string | `"maria-mariadb"`                  | Address of database host                                                                                                                                                                                                                                                                                                                                  |
| zabbix.zabbixproxy.DB_SERVER_PORT            | int    | `3306`                             | Port of database                                                                                                                                                                                                                                                                                                                                          |
| zabbix.zabbixproxy.MYSQL_DATABASE            | string | `"my_database"`                    | default to zabbix ( to be precised later)                                                                                                                                                                                                                                                                                                                 |
| zabbix.zabbixproxy.MYSQL_PASSWORD            | string | `"password1"`                      | Password of database                                                                                                                                                                                                                                                                                                                                      |
| zabbix.zabbixproxy.MYSQL_USER                | string | `"admin"`                          | User of database                                                                                                                                                                                                                                                                                                                                          |
| zabbix.zabbixproxy.ZBX_HOSTNAME              | string | `"zabbix-proxy"`                   | Zabbix proxy hostname Case sensitive hostname                                                                                                                                                                                                                                                                                                             |
| zabbix.zabbixproxy.ZBX_JAVAGATEWAY_ENABLE    | bool   | `false`                            | The variable enable communication with Zabbix Java Gateway to collect Java related checks. By default, value is false.                                                                                                                                                                                                                                    |
| zabbix.zabbixproxy.ZBX_PROXYMODE             | int    | `0`                                | The variable allows to switch Zabbix proxy mode. Bu default, value is 0 - active proxy. Allowed values are 0 and 1.                                                                                                                                                                                                                                       |
| zabbix.zabbixproxy.ZBX_SERVER_HOST           | string | `"zabbix-server"`                  | Zabbix server host                                                                                                                                                                                                                                                                                                                                        |
| zabbix.zabbixproxy.ZBX_SERVER_PORT           | int    | `10051`                            | Zabbix server port                                                                                                                                                                                                                                                                                                                                        |
| zabbix.zabbixproxy.ZBX_VMWARECACHESIZE       | string | `"128M"`                           | Cache size                                                                                                                                                                                                                                                                                                                                                |
| zabbix.zabbixproxy.enabled                   | bool   | `false`                            | Enables use of **Zabbix proxy**                                                                                                                                                                                                                                                                                                                           |
| zabbix.zabbixproxy.image.pullPolicy          | string | `"IfNotPresent"`                   | Pull policy of Docker image                                                                                                                                                                                                                                                                                                                               |
| zabbix.zabbixproxy.image.pullSecrets         | list   | `[]`                               | List of dockerconfig secrets names to use when pulling images                                                                                                                                                                                                                                                                                             |
| zabbix.zabbixproxy.image.repository          | string | `"zabbix/zabbix-proxy-mysql"`      | Zabbix proxy Docker image name                                                                                                                                                                                                                                                                                                                            |
| zabbix.zabbixproxy.image.tag                 | string | `"ubuntu-5.4.0"`                   | Tag of Docker image of Zabbix proxy                                                                                                                                                                                                                                                                                                                       |
| zabbix.zabbixproxy.service.port              | int    | `10051`                            | Port to expose service                                                                                                                                                                                                                                                                                                                                    |
| zabbix.zabbixproxy.service.targetPort        | int    | `10051`                            | Port of application pod                                                                                                                                                                                                                                                                                                                                   |
| zabbix.zabbixproxy.service.type              | string | `"ClusterIP"`                      | Type of service for Zabbix proxy                                                                                                                                                                                                                                                                                                                          |
| zabbix.zabbixweb.DB_SERVER_HOST              | string | `"zabbix-postgresql"`              | Address of database host                                                                                                                                                                                                                                                                                                                                  |
| zabbix.zabbixweb.DB_SERVER_PORT              | int    | `5432`                             | Port of database                                                                                                                                                                                                                                                                                                                                          |
| zabbix.zabbixweb.POSTGRES_DB                 | string | `"zabbix"`                         | Name of database                                                                                                                                                                                                                                                                                                                                          |
| zabbix.zabbixweb.POSTGRES_PASSWORD           | string | `"zabbix_pwd"`                     | Password of database                                                                                                                                                                                                                                                                                                                                      |
| zabbix.zabbixweb.POSTGRES_USER               | string | `"zabbix"`                         | User of database                                                                                                                                                                                                                                                                                                                                          |
| zabbix.zabbixweb.ZBX_SERVER_HOST             | string | `"zabbix-server"`                  | Zabbix server host                                                                                                                                                                                                                                                                                                                                        |
| zabbix.zabbixweb.ZBX_SERVER_PORT             | int    | `10051`                            | Zabbix server port                                                                                                                                                                                                                                                                                                                                        |
| zabbix.zabbixweb.enabled                     | bool   | `true`                             | Enables use of Zabbix web                                                                                                                                                                                                                                                                                                                                 |
| zabbix.zabbixweb.image.pullPolicy            | string | `"IfNotPresent"`                   | Pull policy of Docker image                                                                                                                                                                                                                                                                                                                               |
| zabbix.zabbixweb.image.pullSecrets           | list   | `[]`                               | List of dockerconfig secrets names to use when pulling images                                                                                                                                                                                                                                                                                             |
| zabbix.zabbixweb.image.repository            | string | `"zabbix/zabbix-web-apache-pgsql"` | Zabbix web Docker image name                                                                                                                                                                                                                                                                                                                              |
| zabbix.zabbixweb.image.tag                   | string | `"ubuntu-5.4.0"`                   | Tag of Docker image of Zabbix web                                                                                                                                                                                                                                                                                                                         |
| zabbix.zabbixweb.service.port                | int    | `80`                               | Port to expose service                                                                                                                                                                                                                                                                                                                                    |
| zabbix.zabbixweb.service.targetPort          | int    | `8080`                             | Port of application pod                                                                                                                                                                                                                                                                                                                                   |
| zabbix.zabbixweb.service.type                | string | `"NodePort"`                       | Type of service for Zabbix web                                                                                                                                                                                                                                                                                                                            |

    `




                            End of section




    `

**_ Go to [Grafana configuration](#Grafana_Configuration), [Zabbix Configuration](#Zabbix_Configuration), [Kibana Configuration](#Kibana_Configuration), [ElasticSearch Configuration](#ElasticSearch_Configuration). _**

# Kibana_Configuration

The following tables lists the configurable parameters of the kibana chart and their default values.

| Parameter                    | Description                                                                                                                                                                                    | Default                            |
| ---------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------- |
| `kibana.affinity`            | Configurable [affinity][]                                                                                                                                                                      | `{}`                               |
| `kibana.elasticsearchHosts`  | The URLs used to connect to Elasticsearch                                                                                                                                                      | `http://elasticsearch-master:9200` |
| `kibana.envFrom`             | Templatable string to be passed to the [environment from variables][] which will be appended to the `envFrom:` definition for the container                                                    | `[]`                               |
| `kibana.extraContainers`     | Templatable string of additional containers to be passed to the `tpl` function                                                                                                                 | `""`                               |
| `kibana.extraEnvs`           | Extra [environment variables][] which will be appended to the `env:` definition for the container                                                                                              | see [values.yaml][]                |
| `kibana.extraInitContainers` | Templatable string of additional containers to be passed to the `tpl` function                                                                                                                 | `""`                               |
| `kibana.fullnameOverride`    | Overrides the full name of the resources. If not set the name will default to " `.Release.Name` - `.Values.nameOverride orChart.Name` "                                                        | `""`                               |
| `kibana.healthCheckPath`     | The path used for the readinessProbe to check that Kibana is ready. If you are setting `server.basePath` you will also need to update this to `/${basePath}/app/kibana`                        | `/app/kibana`                      |
| `kibana.hostAliases`         | Configurable [hostAliases][]                                                                                                                                                                   | `[]`                               |
| `kibana.httpPort`            | The http port that Kubernetes will use for the healthchecks and the service                                                                                                                    | `5601`                             |
| `kibana.imagePullPolicy`     | The Kubernetes [imagePullPolicy][]value                                                                                                                                                        | `IfNotPresent`                     |
| `kibana.imagePullSecrets`    | Configuration for [imagePullSecrets][] so that you can use a private registry for your image                                                                                                   | `[]`                               |
| `kibana.imageTag`            | The Kibana Docker image tag                                                                                                                                                                    | `7.13.1`                           |
| `kibana.image`               | The Kibana Docker image                                                                                                                                                                        | `docker.elastic.co/kibana/kibana`  |
| `kibana.ingress`             | Configurable [ingress][] to expose the Kibana service.                                                                                                                                         | see [values.yaml][]                |
| `kibana.kibanaConfig`        | Allows you to add any config files in `/usr/share/kibana/config/` such as `kibana.yml` See [values.yaml][] for an example of the formatting                                                    | `{}`                               |
| `kibana.labels`              | Configurable [labels][] applied to all Kibana pods                                                                                                                                             | `{}`                               |
| `kibana.lifecycle`           | Allows you to add [lifecycle hooks][]. See [values.yaml][] for an example of the formatting                                                                                                    | `{}`                               |
| `kibana.nameOverride`        | Overrides the chart name for resources. If not set the name will default to `.Chart.Name`                                                                                                      | `""`                               |
| `kibana.nodeSelector`        | Configurable [nodeSelector][] so that you can target specific nodes for your Kibana instances                                                                                                  | `{}`                               |
| `kibana.podAnnotations`      | Configurable [annotations][] applied to all Kibana pods                                                                                                                                        | `{}`                               |
| `kibana.podSecurityContext`  | Allows you to set the [securityContext][] for the pod                                                                                                                                          | see [values.yaml][]                |
| `kibana.priorityClassName`   | The name of the [PriorityClass][]. No default is supplied as the PriorityClass must be created first                                                                                           | `""`                               |
| `kibana.protocol`            | The protocol that will be used for the readinessProbe. Change this to `https` if you have `server.ssl.enabled: true` set                                                                       | `http`                             |
| `kibana.readinessProbe`      | Configuration for the readiness [probe][]                                                                                                                                                      | see [values.yaml][]                |
| `kibana.replicas`            | Kubernetes replica count for the Deployment (i.e. how many pods)                                                                                                                               | `1`                                |
| `kibana.resources`           | Allows you to set the [resources][] for the Deployment                                                                                                                                         | see [values.yaml][]                |
| `kibana.secretMounts`        | Allows you easily mount a secret as a file inside the Deployment. Useful for mounting certificates and other secrets. See [values.yaml][] for an example                                       | `[]`                               |
| `kibana.securityContext`     | Allows you to set the [securityContext][] for the container                                                                                                                                    | see [values.yaml][]                |
| `kibana.serverHost`          | The [server.host][] Kibana setting. This is set explicitly so that the default always matches what comes with the Docker image                                                                 | `0.0.0.0`                          |
| `kibana.serviceAccount`      | Allows you to overwrite the "default" [serviceAccount][] for the pod                                                                                                                           | `[]`                               |
| `kibana.service`             | Configurable [service][] to expose the Kibana service.                                                                                                                                         | see [values.yaml][]                |
| `kibana.tolerations`         | Configurable [tolerations][])                                                                                                                                                                  | `[]`                               |
| `kibana.updateStrategy`      | Allows you to change the default [updateStrategy][] for the Deployment. A [standard upgrade][] of Kibana requires a full stop and start which is why the default strategy is set to `Recreate` | `type: Recreate`                   |

### Deprecated

| Parameter                 | Description                                                                          | Default |
| ------------------------- | ------------------------------------------------------------------------------------ | ------- |
| `kibana.elasticsearchURL` | The URL used to connect to Elasticsearch. needs to be used for Kibana versions < 6.6 | `""`    |

    `




                            End of section




    `

**_ Go to [Grafana configuration](#Grafana_Configuration), [Zabbix Configuration](#Zabbix_Configuration), [Kibana Configuration](#Kibana_Configuration), [ElasticSearch Configuration](#ElasticSearch_Configuration). _**

# ElasticSearch_Configuration

The following tables lists the configurable parameters of the ElasticSearch chart and their default values.

| Parameter                                        | Description                                                                                                                                                                                                                                                                                                       | Default                                          |
| ------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ |
| `elasticsearch.antiAffinityTopologyKey`          | The [anti-affinity][] topology key. By default this will prevent multiple Elasticsearch nodes from running on the same Kubernetes node                                                                                                                                                                            | `kubernetes.io/hostname`                         |
| `elasticsearch.antiAffinity`                     | Setting this to hard enforces the [anti-affinity][] rules. If it is set to soft it will be done "best effort". Other values will be ignored                                                                                                                                                                       | `hard`                                           |
| `elasticsearch.clusterHealthCheckParams`         | The [Elasticsearch cluster health status params][] that will be used by readiness [probe][] command                                                                                                                                                                                                               | `wait_for_status=green&timeout=1s`               |
| `elasticsearch.clusterName`                      | This will be used as the Elasticsearch [cluster.name][] and should be unique per cluster in the namespace                                                                                                                                                                                                         | `elasticsearch`                                  |
| `elasticsearch.enableServiceLinks`               | Set to false to disabling service links, which can cause slow pod startup times when there are many services in the current namespace.                                                                                                                                                                            | `true`                                           |
| `elasticsearch.envFrom`                          | Templatable string to be passed to the [environment from variables][] which will be appended to the `envFrom:` definition for the container                                                                                                                                                                       | `[]`                                             |
| `elasticsearch.esConfig`                         | Allows you to add any config files in `/usr/share/elasticsearch/config/` such as `elasticsearch.yml` and `log4j2.properties`. See [values.yaml][] for an example of the formatting                                                                                                                                | `{}`                                             |
| `elasticsearch.esJavaOpts`                       | [Java options][] for Elasticsearch. This is where you could configure the [jvm heap size][]                                                                                                                                                                                                                       | `""`                                             |
| `elasticsearch.esMajorVersion`                   | Deprecated. Instead, use the version of the chart corresponding to your ES minor version. Used to set major version specific configuration. If you are using a custom image and not running the default Elasticsearch version you will need to set this to the version you are running (e.g. `esMajorVersion: 6`) | `""`                                             |
| `elasticsearch.extraContainers`                  | Templatable string of additional `containers` to be passed to the `tpl` function                                                                                                                                                                                                                                  | `""`                                             |
| `elasticsearch.extraEnvs`                        | Extra [environment variables][] which will be appended to the `env:` definition for the container                                                                                                                                                                                                                 | `[]`                                             |
| `elasticsearch.extraInitContainers`              | Templatable string of additional `initContainers` to be passed to the `tpl` function                                                                                                                                                                                                                              | `""`                                             |
| `elasticsearch.extraVolumeMounts`                | Templatable string of additional `volumeMounts` to be passed to the `tpl` function                                                                                                                                                                                                                                | `""`                                             |
| `elasticsearch.extraVolumes`                     | Templatable string of additional `volumes` to be passed to the `tpl` function                                                                                                                                                                                                                                     | `""`                                             |
| `elasticsearch.fullnameOverride`                 | Overrides the `clusterName` and `nodeGroup` when used in the naming of resources. This should only be used when using a single `nodeGroup`, otherwise you will have name conflicts                                                                                                                                | `""`                                             |
| `elasticsearch.hostAliases`                      | Configurable [hostAliases][]                                                                                                                                                                                                                                                                                      | `[]`                                             |
| `elasticsearch.httpPort`                         | The http port that Kubernetes will use for the healthchecks and the service. If you change this you will also need to set [http.port][] in `extraEnvs`                                                                                                                                                            | `9200`                                           |
| `elasticsearch.imagePullPolicy`                  | The Kubernetes [imagePullPolicy][] value                                                                                                                                                                                                                                                                          | `IfNotPresent`                                   |
| `elasticsearch.imagePullSecrets`                 | Configuration for [imagePullSecrets][] so that you can use a private registry for your image                                                                                                                                                                                                                      | `[]`                                             |
| `elasticsearch.imageTag`                         | The Elasticsearch Docker image tag                                                                                                                                                                                                                                                                                | `7.13.1`                                         |
| `elasticsearch.image`                            | The Elasticsearch Docker image                                                                                                                                                                                                                                                                                    | `docker.elastic.co/elasticsearch/elasticsearch`  |
| `elasticsearch.ingress`                          | Configurable [ingress][] to expose the Elasticsearch service. See [values.yaml][] for an example                                                                                                                                                                                                                  | see [values.yaml][]                              |
| `elasticsearch.initResources`                    | Allows you to set the [resources][] for the `initContainer` in the StatefulSet                                                                                                                                                                                                                                    | `{}`                                             |
| `elasticsearch.keystore`                         | Allows you map Kubernetes secrets into the keystore. See the [config example][] and [how to use the keystore][]                                                                                                                                                                                                   | `[]`                                             |
| `elasticsearch.labels`                           | Configurable [labels][] applied to all Elasticsearch pods                                                                                                                                                                                                                                                         | `{}`                                             |
| `elasticsearch.lifecycle`                        | Allows you to add [lifecycle hooks][]. See [values.yaml][] for an example of the formatting                                                                                                                                                                                                                       | `{}`                                             |
| `elasticsearch.masterService`                    | The service name used to connect to the masters. You only need to set this if your master `nodeGroup` is set to something other than `master`. See [Clustering and Node Discovery][] for more information                                                                                                         | `""`                                             |
| `elasticsearch.masterTerminationFix`             | A workaround needed for Elasticsearch < 7.2 to prevent master status being lost during restarts [#63][]                                                                                                                                                                                                           | `false`                                          |
| `elasticsearch.maxUnavailable`                   | The [maxUnavailable][] value for the pod disruption budget. By default this will prevent Kubernetes from having more than 1 unhealthy pod in the node group                                                                                                                                                       | `1`                                              |
| `elasticsearch.minimumMasterNodes`               | The value for [discovery.zen.minimum_master_nodes][]. Should be set to `(master_eligible_nodes / 2) + 1`. Ignored in Elasticsearch versions >= 7                                                                                                                                                                  | `2`                                              |
| `elasticsearch.nameOverride`                     | Overrides the `clusterName` when used in the naming of resources                                                                                                                                                                                                                                                  | `""`                                             |
| `elasticsearch.networkHost`                      | Value for the [network.host Elasticsearch setting][]                                                                                                                                                                                                                                                              | `0.0.0.0`                                        |
| `elasticsearch.networkPolicy`                    | The [NetworkPolicy](https://kubernetes.io/docs/concepts/services-networking/network-policies/) to set. See [`values.yaml`](./values.yaml) for an example                                                                                                                                                          | `{http.enabled: false,transport.enabled: false}` |
| `elasticsearch.nodeAffinity`                     | Value for the [node affinity settings][]                                                                                                                                                                                                                                                                          | `{}`                                             |
| `elasticsearch.nodeGroup`                        | This is the name that will be used for each group of nodes in the cluster. The name will be `clusterName-nodeGroup-X` , `nameOverride-nodeGroup-X` if a `nameOverride` is specified, and `fullnameOverride-X` if a `fullnameOverride` is specified                                                                | `master`                                         |
| `elasticsearch.nodeSelector`                     | Configurable [nodeSelector][] so that you can target specific nodes for your Elasticsearch cluster                                                                                                                                                                                                                | `{}`                                             |
| `elasticsearch.persistence`                      | Enables a persistent volume for Elasticsearch data. Can be disabled for nodes that only have [roles][] which don't require persistent data                                                                                                                                                                        | see [values.yaml][]                              |
| `elasticsearch.podAnnotations`                   | Configurable [annotations][] applied to all Elasticsearch pods                                                                                                                                                                                                                                                    | `{}`                                             |
| `elasticsearch.podManagementPolicy`              | By default Kubernetes [deploys StatefulSets serially][]. This deploys them in parallel so that they can discover each other                                                                                                                                                                                       | `Parallel`                                       |
| `elasticsearch.podSecurityContext`               | Allows you to set the [securityContext][] for the pod                                                                                                                                                                                                                                                             | see [values.yaml][]                              |
| `elasticsearch.podSecurityPolicy`                | Configuration for create a pod security policy with minimal permissions to run this Helm chart with `create: true`. Also can be used to reference an external pod security policy with `name: "externalPodSecurityPolicy"`                                                                                        | see [values.yaml][]                              |
| `elasticsearch.priorityClassName`                | The name of the [PriorityClass][]. No default is supplied as the PriorityClass must be created first                                                                                                                                                                                                              | `""`                                             |
| `elasticsearch.protocol`                         | The protocol that will be used for the readiness [probe][]. Change this to `https` if you have `xpack.security.http.ssl.enabled` set                                                                                                                                                                              | `http`                                           |
| `elasticsearch.rbac`                             | Configuration for creating a role, role binding and ServiceAccount as part of this Helm chart with `create: true`. Also can be used to reference an external ServiceAccount with `serviceAccountName: "externalServiceAccountName"`                                                                               | see [values.yaml][]                              |
| `elasticsearch.readinessProbe`                   | Configuration fields for the readiness [probe][]                                                                                                                                                                                                                                                                  | see [values.yaml][]                              |
| `elasticsearch.replicas`                         | Kubernetes replica count for the StatefulSet (i.e. how many pods)                                                                                                                                                                                                                                                 | `3`                                              |
| `elasticsearch.resources`                        | Allows you to set the [resources][] for the StatefulSet                                                                                                                                                                                                                                                           | see [values.yaml][]                              |
| `elasticsearch.roles`                            | A hash map with the specific [roles][] for the `nodeGroup`                                                                                                                                                                                                                                                        | see [values.yaml][]                              |
| `elasticsearch.schedulerName`                    | Name of the [alternate scheduler][]                                                                                                                                                                                                                                                                               | `""`                                             |
| `elasticsearch.secretMounts`                     | Allows you easily mount a secret as a file inside the StatefulSet. Useful for mounting certificates and other secrets. See [values.yaml][] for an example                                                                                                                                                         | `[]`                                             |
| `elasticsearch.securityContext`                  | Allows you to set the [securityContext][] for the container                                                                                                                                                                                                                                                       | see [values.yaml][]                              |
| `elasticsearch.service.annotations`              | [LoadBalancer annotations][] that Kubernetes will use for the service. This will configure load balancer if `service.type` is `LoadBalancer`                                                                                                                                                                      | `{}`                                             |
| `elasticsearch.service.externalTrafficPolicy`    | Some cloud providers allow you to specify the [LoadBalancer externalTrafficPolicy][]. Kubernetes will use this to preserve the client source IP. This will configure load balancer if `service.type` is `LoadBalancer`                                                                                            | `""`                                             |
| `elasticsearch.service.httpPortName`             | The name of the http port within the service                                                                                                                                                                                                                                                                      | `http`                                           |
| `elasticsearch.service.labelsHeadless`           | Labels to be added to headless service                                                                                                                                                                                                                                                                            | `{}`                                             |
| `elasticsearch.service.labels`                   | Labels to be added to non-headless service                                                                                                                                                                                                                                                                        | `{}`                                             |
| `elasticsearch.service.loadBalancerIP`           | Some cloud providers allow you to specify the [loadBalancer][] IP. If the `loadBalancerIP` field is not specified, the IP is dynamically assigned. If you specify a `loadBalancerIP` but your cloud provider does not support the feature, it is ignored.                                                         | `""`                                             |
| `elasticsearch.service.loadBalancerSourceRanges` | The IP ranges that are allowed to access                                                                                                                                                                                                                                                                          | `[]`                                             |
| `elasticsearch.service.nodePort`                 | Custom [nodePort][] port that can be set if you are using `service.type: nodePort`                                                                                                                                                                                                                                | `""`                                             |
| `elasticsearch.service.transportPortName`        | The name of the transport port within the service                                                                                                                                                                                                                                                                 | `transport`                                      |
| `elasticsearch.service.type`                     | Elasticsearch [Service Types][]                                                                                                                                                                                                                                                                                   | `ClusterIP`                                      |
| `elasticsearch.sidecarResources`                 | Allows you to set the [resources][] for the sidecar containers in the StatefulSet                                                                                                                                                                                                                                 | {}                                               |
| `elasticsearch.sysctlInitContainer`              | Allows you to disable the `sysctlInitContainer` if you are setting [sysctl vm.max_map_count][] with another method                                                                                                                                                                                                | `enabled: true`                                  |
| `elasticsearch.sysctlVmMaxMapCount`              | Sets the [sysctl vm.max_map_count][] needed for Elasticsearch                                                                                                                                                                                                                                                     | `262144`                                         |
| `elasticsearch.terminationGracePeriod`           | The [terminationGracePeriod][] in seconds used when trying to stop the pod                                                                                                                                                                                                                                        | `120`                                            |
| `elasticsearch.tolerations`                      | Configurable [tolerations][]                                                                                                                                                                                                                                                                                      | `[]`                                             |
| `elasticsearch.transportPort`                    | The transport port that Kubernetes will use for the service. If you change this you will also need to set [transport port configuration][] in `extraEnvs`                                                                                                                                                         | `9300`                                           |
| `elasticsearch.updateStrategy`                   | The [updateStrategy][] for the StatefulSet. By default Kubernetes will wait for the cluster to be green after upgrading each pod. Setting this to `OnDelete` will allow you to manually delete each pod during upgrades                                                                                           | `RollingUpdate`                                  |
| `elasticsearch.volumeClaimTemplate`              | Configuration for the [volumeClaimTemplate for StatefulSets][]. You will want to adjust the storage (default `30Gi` ) and the `storageClassName` if you are using a different storage class                                                                                                                       | see [values.yaml][]                              |

### Deprecated

| Parameter               | Description                                                                                                   | Default |
| ----------------------- | ------------------------------------------------------------------------------------------------------------- | ------- |
| `elasticsearch.fsGroup` | The Group ID (GID) for [securityContext][] so that the Elasticsearch user can read from the persistent volume | `""`    |

**_ Go to [Grafana configuration](#Grafana_Configuration), [Zabbix Configuration](#Zabbix_Configuration), [Kibana Configuration](#Kibana_Configuration), [ElasticSearch Configuration](#ElasticSearch_Configuration). _**
